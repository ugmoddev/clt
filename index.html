<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hoi Cloud</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body, html {
            height: 100%; 
            width: 100%;
            background: #fff; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            touch-action: none;
        }
        
        #iframeContainer {
            position: absolute;
            top: 0;
            left: 0;
            right: 0; 
            bottom: 0;
            cursor: default; 
            transform-origin: center center;
            transition: transform 0.2s ease-out; 
            transform: scale(1.0) translate(0px, 0px);
        }
        
        #iframeContainer.pan-mode {
            cursor: grab; 
        }
        
        #iframeContainer.pan-mode.is-dragging {
            cursor: grabbing; 
        }
        
        #hiddenFrame {
            width: 100%;
            height: 100%; 
            border: none;
            display: block;
        }
        
        #hiddenFrame.active {
            pointer-events: auto;
        }
        
        #hiddenFrame.inactive {
            pointer-events: none;
        }

        /* Control Panel - Original Gradient Colors */
        #controlPanel {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: rgba(255, 255, 255, 0.98);
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            width: 220px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
        }

        .control-label {
            font-size: 13px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 2px;
        }

        .control-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            font-family: inherit;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .control-button:active {
            transform: translateY(0);
        }

        #panToggle.active {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        }

        #panToggle.inactive {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
        }

        #zoomControls {
            display: flex;
            gap: 6px;
            width: 100%;
        }

        #zoomControls button {
            flex: 1;
            padding: 10px;
            font-size: 16px;
        }

        #zoomLevel {
            text-align: center;
            font-size: 12px;
            color: #718096;
            font-weight: 600;
            margin-top: 4px;
        }

        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 6px;
        }
        
        .status-active {
            background-color: #48bb78;
            box-shadow: 0 0 8px rgba(72, 187, 120, 0.6);
        }
        
        .status-inactive {
            background-color: #f56565;
        }

        .watermark {
            position: fixed;
            bottom: 10px;
            right: 10px;
            color: #999;
            font-size: 12px;
            z-index: 999;
        }

        /* Loading indicator */
        #loadingIndicator {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            z-index: 2000;
            font-size: 16px;
            display: none;
        }

        #loadingIndicator.active {
            display: block;
        }

        @media (max-width: 768px) {
            #controlPanel {
                width: 200px;
                padding: 14px;
            }
            
            .control-button {
                padding: 10px 12px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div id="loadingIndicator">Launching game...</div>

    <div id="controlPanel">
        <div class="control-group">
            <div class="control-label">üîó Copy Link</div>
            <button id="copyUrlButton" class="control-button">
                üìã Copy Tool Link
            </button>
        </div>
        
        <div class="control-group">
            <div class="control-label">üîç Zoom Controls</div>
            <div id="zoomControls">
                <button id="zoomOutBtn" class="control-button">‚ûñ</button>
                <button id="zoomInBtn" class="control-button">‚ûï</button>
                <button id="resetZoomBtn" class="control-button">üîÑ</button>
            </div>
            <div id="zoomLevel">100%</div>
        </div>
        
        <div class="control-group">
            <div class="control-label">
                <span class="status-indicator status-inactive" id="statusIndicator"></span>
                üñ±Ô∏è Pan Controls
            </div>
            <button id="panToggle" class="control-button inactive">
                üîì Enable Pan Mode
            </button>
            <div style="font-size: 11px; color: #718096; line-height: 1.4;">
                ‚Ä¢ Enable: Touch/Drag to move around<br>
                ‚Ä¢ Disable: Touch to use iframe
            </div>
        </div>

        <div class="control-group">
            <div class="control-label">üîÑ Reload</div>
            <button id="reloadButton" class="control-button">
                üîÑ Reload Page
            </button>
        </div>
    </div>
    
    <div id="iframeContainer">
        <iframe id="hiddenFrame" src="https://gointerstellar.app/a/hvtrs8%2F-nmw%2Cge%2Fcprs-cnuqtgr%2Filc-9355%2Falwsvep.jtol" referrerpolicy="no-referrer" class="active"></iframe>
    </div>

    <div class="watermark">
        Link tool: https://ugmoddev.github.io/tool/
    </div>

    <script>
        // Configuration
        const CONFIG = {
            ZOOM: {
                MIN: 0.3,
                MAX: 5.0,
                STEP: 0.1,
                DEFAULT: 1.0
            },
            URLS: {
                TOOL: 'https://ugmoddev.github.io/tool/',
                DEFAULT: 'https://gointerstellar.app/a/hvtrs8%2F-nmw%2Cge%2Fcprs-cnuqtgr%2Filc-9355%2Falwsvep.jtol'
            }
        };

        // State management
        let state = {
            zoom: CONFIG.ZOOM.DEFAULT,
            translateX: 0,
            translateY: 0,
            isDragging: false,
            startX: 0,
            startY: 0,
            panMode: false,
            isTouchDragging: false,
            lastTouchX: 0,
            lastTouchY: 0,
            touchZoomDistance: 0
        };

        // DOM elements
        const elements = {
            iframeContainer: document.getElementById('iframeContainer'),
            hiddenFrame: document.getElementById('hiddenFrame'),
            copyButton: document.getElementById('copyUrlButton'),
            zoomLevel: document.getElementById('zoomLevel'),
            panToggle: document.getElementById('panToggle'),
            statusIndicator: document.getElementById('statusIndicator'),
            zoomOutBtn: document.getElementById('zoomOutBtn'),
            zoomInBtn: document.getElementById('zoomInBtn'),
            resetZoomBtn: document.getElementById('resetZoomBtn'),
            reloadButton: document.getElementById('reloadButton'),
            loadingIndicator: document.getElementById('loadingIndicator')
        };

        // Core functionality
        function applyTransform() {
            const { zoom, translateX, translateY } = state;
            
            if (zoom > 1.0) {
                const containerWidth = window.innerWidth;
                const containerHeight = window.innerHeight;
                const maxTranslateX = Math.max(0, (containerWidth * zoom - containerWidth) / (2 * zoom));
                const maxTranslateY = Math.max(0, (containerHeight * zoom - containerHeight) / (2 * zoom));
                
                state.translateX = Math.max(-maxTranslateX, Math.min(translateX, maxTranslateX));
                state.translateY = Math.max(-maxTranslateY, Math.min(translateY, maxTranslateY));
            } else {
                state.translateX = 0;
                state.translateY = 0;
            }

            elements.iframeContainer.style.transform = 
                `scale(${zoom}) translate(${state.translateX}px, ${state.translateY}px)`;
            
            elements.zoomLevel.textContent = `${Math.round(zoom * 100)}%`;
        }

        function applyZoom(level) {
            state.zoom = Math.max(CONFIG.ZOOM.MIN, Math.min(level, CONFIG.ZOOM.MAX));
            applyTransform();
        }

        function zoomIn() {
            applyZoom(state.zoom + CONFIG.ZOOM.STEP);
        }

        function zoomOut() {
            applyZoom(state.zoom - CONFIG.ZOOM.STEP);
        }

        function resetZoom() {
            applyZoom(CONFIG.ZOOM.DEFAULT);
            state.translateX = 0;
            state.translateY = 0;
            applyTransform();
        }

        function togglePanMode() {
            state.panMode = !state.panMode;
            
            if (state.panMode) {
                elements.panToggle.textContent = 'üîí Disable Pan Mode';
                elements.panToggle.classList.remove('inactive');
                elements.panToggle.classList.add('active');
                elements.iframeContainer.classList.add('pan-mode');
                elements.hiddenFrame.classList.add('inactive');
                elements.hiddenFrame.classList.remove('active');
                elements.statusIndicator.classList.remove('status-inactive');
                elements.statusIndicator.classList.add('status-active');
            } else {
                elements.panToggle.textContent = 'üîì Enable Pan Mode';
                elements.panToggle.classList.remove('active');
                elements.panToggle.classList.add('inactive');
                elements.iframeContainer.classList.remove('pan-mode');
                elements.iframeContainer.classList.remove('is-dragging');
                elements.hiddenFrame.classList.remove('inactive');
                elements.hiddenFrame.classList.add('active');
                elements.statusIndicator.classList.remove('status-active');
                elements.statusIndicator.classList.add('status-inactive');
            }
            
            state.isDragging = false;
            state.isTouchDragging = false;
        }

        function reloadPage() {
            const originalText = elements.reloadButton.textContent;
            elements.reloadButton.textContent = '‚è≥ Reloading...';
            elements.reloadButton.disabled = true;
            
            const iframeSrc = elements.hiddenFrame.src;
            elements.hiddenFrame.src = '';
            
            setTimeout(() => {
                elements.hiddenFrame.src = iframeSrc;
                
                setTimeout(() => {
                    elements.reloadButton.textContent = originalText;
                    elements.reloadButton.disabled = false;
                }, 1000);
            }, 300);
        }

        function showLoading() {
            elements.loadingIndicator.classList.add('active');
        }

        function hideLoading() {
            elements.loadingIndicator.classList.remove('active');
        }

        // Event listeners
        function initializeEventListeners() {
            // Copy URL Button
            elements.copyButton.addEventListener('click', async () => {
                try {
                    await navigator.clipboard.writeText(CONFIG.URLS.TOOL);
                    elements.copyButton.textContent = '‚úÖ Copied!';
                    setTimeout(() => {
                        elements.copyButton.textContent = 'üìã Copy Tool Link';
                    }, 2000);
                } catch (err) {
                    elements.copyButton.textContent = '‚ùå Failed';
                    setTimeout(() => {
                        elements.copyButton.textContent = 'üìã Copy Tool Link';
                    }, 2000);
                }
            });

            // Zoom Controls
            elements.zoomOutBtn.addEventListener('click', zoomOut);
            elements.zoomInBtn.addEventListener('click', zoomIn);
            elements.resetZoomBtn.addEventListener('click', resetZoom);

            // Pan Toggle
            elements.panToggle.addEventListener('click', togglePanMode);

            // Reload Button
            elements.reloadButton.addEventListener('click', reloadPage);

            // Iframe loading events
            elements.hiddenFrame.addEventListener('load', hideLoading);
            elements.hiddenFrame.addEventListener('error', hideLoading);

            // Show loading when page loads
            showLoading();

            // Mouse events for panning
            elements.iframeContainer.addEventListener('mousedown', (e) => {
                if (!state.panMode || e.button !== 0) return;
                
                state.isDragging = true;
                state.startX = e.clientX;
                state.startY = e.clientY;
                elements.iframeContainer.classList.add('is-dragging');
                e.preventDefault();
            });

            document.addEventListener('mousemove', (e) => {
                if (!state.isDragging || !state.panMode) return;
                
                const dx = e.clientX - state.startX;
                const dy = e.clientY - state.startY;
                
                state.translateX += dx / state.zoom;
                state.translateY += dy / state.zoom;
                
                applyTransform();
                
                state.startX = e.clientX;
                state.startY = e.clientY;
                e.preventDefault();
            });
            
            document.addEventListener('mouseup', (e) => {
                if (state.isDragging) {
                    state.isDragging = false;
                    elements.iframeContainer.classList.remove('is-dragging');
                }
            });
            
            // Touch events for panning
            elements.iframeContainer.addEventListener('touchstart', (e) => {
                if (state.panMode && e.touches.length === 1) {
                    e.preventDefault();
                    state.isTouchDragging = true;
                    state.lastTouchX = e.touches[0].clientX;
                    state.lastTouchY = e.touches[0].clientY;
                    elements.iframeContainer.classList.add('is-dragging');
                }
            }, { passive: false });

            elements.iframeContainer.addEventListener('touchmove', (e) => {
                if (state.isTouchDragging && state.panMode && e.touches.length === 1) {
                    e.preventDefault();
                    const clientX = e.touches[0].clientX;
                    const clientY = e.touches[0].clientY;

                    const dx = clientX - state.lastTouchX;
                    const dy = clientY - state.lastTouchY;

                    state.translateX += dx / state.zoom;
                    state.translateY += dy / state.zoom;
                    
                    applyTransform();
                    
                    state.lastTouchX = clientX;
                    state.lastTouchY = clientY;
                }
            }, { passive: false });

            elements.iframeContainer.addEventListener('touchend', (e) => {
                if (state.isTouchDragging) {
                    state.isTouchDragging = false;
                    elements.iframeContainer.classList.remove('is-dragging');
                }
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            applyTransform();
        });
    </script>
</body>
</html>
